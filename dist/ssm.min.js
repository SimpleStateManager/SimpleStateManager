!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ssm=e()}(this,function(){"use strict";function t(t,e,n){for(var i=t.length,o=[],s=0;s<i;s++){var r=t[s];r[e]&&r[e]===n&&o.push(r)}return o}function e(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<10;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function n(t){for(var e=t.length,n=0;n<e;n++)t[n]()}function i(t,e,n){var i;return function(){var o=this,s=arguments,r=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||t.apply(o,s)},e),r&&t.apply(o,s)}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=[],a=function(){},h=function(){function t(n){o(this,t),this.id=n.id||e(),this.query=n.query||"all",delete n.id,delete n.query;var i={onEnter:[],onLeave:[],onResize:[],onFirstRun:[]};if(this.options=Object.assign({},i,n),"function"==typeof this.options.onEnter&&(this.options.onEnter=[this.options.onEnter]),"function"==typeof this.options.onLeave&&(this.options.onLeave=[this.options.onLeave]),"function"==typeof this.options.onResize&&(this.options.onResize=[this.options.onResize]),"function"==typeof this.options.onFirstRun&&(this.options.onFirstRun=[this.options.onFirstRun]),!1===this.testConfigOptions("once"))return this.valid=!1,!1;this.valid=!0,this.active=!1,this.init()}return t.prototype.init=function(){this.test=window.matchMedia(this.query),this.test.matches&&this.testConfigOptions("match")&&this.enterState(),this.listener=function(t){var e=!1;t.matches?this.testConfigOptions("match")&&(this.enterState(),e=!0):(this.leaveState(),e=!0),e&&a()}.bind(this),this.test.addListener(this.listener)},t.prototype.enterState=function(){n(this.options.onFirstRun),n(this.options.onEnter),this.options.onFirstRun=[],this.active=!0},t.prototype.leaveState=function(){n(this.options.onLeave),this.active=!1},t.prototype.resizeState=function(){this.testConfigOptions("resize")&&n(this.options.onResize)},t.prototype.destroy=function(){this.test.removeListener(this.listener)},t.prototype.attachCallback=function(t,e,n){switch(t){case"enter":this.options.onEnter.push(e);break;case"leave":this.options.onLeave.push(e);break;case"resize":this.options.onResize.push(e)}"enter"===t&&n&&this.active&&e()},t.prototype.testConfigOptions=function(t){for(var e=r.length,n=0;n<e;n++){var i=r[n];if(void 0!==this.options[i.name]&&i.when===t&&!1===i.test.bind(this)())return!1}return!0},t.addConfigOption=function(t){r.push(t)},t.getConfigOptions=function(){return r},t.removeConfigOption=function(t){r.forEach(function(e,n){e.name===t&&r.splice(n,1)})},t.setStateChangeMethod=function(t){if("function"!=typeof t)throw new Error("Not a function");a=t},t}(),p=25;return new(function(){function e(t){s(this,e),this.states=[],this.resizeTimer=null,this.configOptions=[],window.addEventListener("resize",i(this.resizeBrowser.bind(this),p),!0)}return e.prototype.addState=function(t){var e=new h(t);return e.valid&&this.states.push(e),e},e.prototype.addStates=function(t){for(var e=t.length-1;e>=0;e--)this.addState(t[e]);return this},e.prototype.getState=function(t){for(var e=this.states.length-1;e>=0;e--){var n=this.states[e];if(n.id===t)return n}},e.prototype.isActive=function(t){return(this.getState(t)||{}).active||!1},e.prototype.getStates=function(t){var e=null,n=[];if(void 0===t)return this.states;e=t.length;for(var i=0;i<e;i++)n.push(this.getState(t[i]));return n},e.prototype.removeState=function(t){for(var e=this.states.length-1;e>=0;e--){var n=this.states[e];n.id===t&&(n.destroy(),this.states.splice(e,1))}return this},e.prototype.removeStates=function(t){for(var e=t.length-1;e>=0;e--)this.removeState(t[e]);return this},e.prototype.removeAllStates=function(){for(var t=this.states.length-1;t>=0;t--)this.states[t].destroy();this.states=[]},e.prototype.addConfigOption=function(t){var e={name:"",test:null,when:"resize"};""!==(t=Object.assign({},e,t)).name&&null!==t.test&&h.addConfigOption(t)},e.prototype.removeConfigOption=function(t){h.removeConfigOption(t)},e.prototype.getConfigOption=function(t){var e=h.getConfigOptions();if("string"!=typeof t)return e;for(var n=e.length-1;n>=0;n--)if(e[n].name===t)return e[n]},e.prototype.getConfigOptions=function(){return h.getConfigOptions()},e.prototype.resizeBrowser=function(){for(var e=t(this.states,"active",!0),n=e.length,i=0;i<n;i++)e[i].resizeState()},e.prototype.stateChange=function(t){h.setStateChangeMethod(t)},e}())});
//# sourceMappingURL=ssm.min.js.map
